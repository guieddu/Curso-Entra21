<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rick and Morty Explorer</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 20px;
    }

    #characters {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .character {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      width: 200px;
      text-align: center;
    }

    .character img {
      max-width: 100%;
      border-radius: 5px;
    }

    #locations, #episodes {
      margin-top: 20px;
    }

    #search {
      margin-top: 20px;
    }

    #details {
      display: none;
      margin-top: 20px;
    }

    #details img {
      max-width: 100%;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h1>Rick and Morty Explorer</h1>

  <div id="search">
    <label for="searchInput">Buscar Personagem:</label>
    <input type="text" id="searchInput" placeholder="Digite o nome do personagem">
    <button onclick="searchCharacter()">Buscar</button>
  </div>

  <div id="characters"></div>

  <div id="locations">
    <h2>Locais</h2>
    <ul id="locationsList"></ul>
  </div>

  <div id="episodes">
    <h2>Episódios</h2>
    <ul id="episodesList"></ul>
  </div>

  <div id="details">
    <h2>Detalhes do Personagem</h2>
    <div id="detailsContent"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const charactersContainer = document.getElementById('characters');
      const locationsList = document.getElementById('locationsList');
      const episodesList = document.getElementById('episodesList');
      const searchInput = document.getElementById('searchInput');
      const detailsContainer = document.getElementById('detailsContent');
      const detailsSection = document.getElementById('details');

      const fetchData = async (url) => {
        try {
          const response = await fetch(url);
          const data = await response.json();
          return data.results || [data];
        } catch (error) {
          console.error('Erro ao obter dados da API:', error);
        }
      };

      const renderCharacters = (characters) => {
        charactersContainer.innerHTML = '';
        characters.forEach(character => {
          const characterDiv = document.createElement('div');
          characterDiv.classList.add('character');
          characterDiv.innerHTML = `
            <img src="${character.image}" alt="${character.name}">
            <h3>${character.name}</h3>
            <p>${character.status}</p>
          `;
          characterDiv.addEventListener('click', () => showCharacterDetails(character));
          charactersContainer.appendChild(characterDiv);
        });
      };

      const renderLocationsAndEpisodes = (locations, episodes) => {
        locationsList.innerHTML = '<h3>Locais</h3>';
        locations.forEach(location => {
          const locationItem = document.createElement('li');
          locationItem.textContent = location.name;
          locationsList.appendChild(locationItem);
        });

        episodesList.innerHTML = '<h3>Episódios</h3>';
        episodes.forEach(episode => {
          const episodeItem = document.createElement('li');
          episodeItem.textContent = episode.name;
          episodesList.appendChild(episodeItem);
        });
      };

      const showCharacterDetails = async (character) => {
        const details = await fetchData(character.url);
        detailsContainer.innerHTML = `
          <img src="${details.image}" alt="${details.name}">
          <h3>${details.name}</h3>
          <p>Espécie: ${details.species}</p>
          <p>Gênero: ${details.gender}</p>
          <p>Último Episódio: ${details.episode[details.episode.length - 1]}</p>
        `;
        detailsSection.style.display = 'block';
      };

      const searchCharacter = async () => {
        const searchTerm = searchInput.value.toLowerCase();
        const characters = await fetchData(`https://rickandmortyapi.com/api/character/?name=${searchTerm}`);
        renderCharacters(characters);
      };

      const charactersUrl = 'https://rickandmortyapi.com/api/character/';
      const locationsUrl = 'https://rickandmortyapi.com/api/location/';
      const episodesUrl = 'https://rickandmortyapi.com/api/episode/';

      fetchData(charactersUrl)
        .then(characters => renderCharacters(characters));

      Promise.all([fetchData(locationsUrl), fetchData(episodesUrl)])
        .then(([locations, episodes]) => renderLocationsAndEpisodes(locations, episodes));
    });
  </script>
</body>